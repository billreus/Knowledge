# 1. Java内存区域与内存溢出异常

虚拟机实现了自动内存管理机制，不用为每一个new操作配对delete/free代码，也不容易出现内存泄露和内存溢出。

## 1.1. 数据区域

Java虚拟机在执行程序时会把所管理的内存划分成若干个数据区域。每个区域有各自的用途，创建和销毁时间。

主要有五个区域：

1. 方法区(Method Area)
2. 虚拟机栈(VM Stack)
3. 本地方法栈(Native Method Stack)
4. 堆(Heap)
5. 程序计数器(Program Counter Register)

### 1.1.1. 程序计数器

程序计数器是一块较小的内存空间，可看作当前线程所执行的字节码的行号指示器。

字节码解释器工作时就是通过改变计数器的值来选取下一条需要执行的字节码指令，分支、循环、跳转、异常处理等基础功能都需要依赖这个计数器完成。

由于Java虚拟机多线程是线程轮流切换并分配处理器的执行时间来实现的，所以在任何一个时刻，一个处理器核心只会执行一条线程中的指令。因此为了线程切换后能恢复到正确的位置。每个线程都需要一个独立的程序计数器。

### 1.1.2. 虚拟机栈

